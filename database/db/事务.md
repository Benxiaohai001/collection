# ACID特性、事务隔离级别（如脏读、幻读）
确保数据的可靠性和数据一致性
## 原子性(Atomicity)
* 定义
要么全部完成，要么全部不完成，不存在中间状态。
事务发生错误会进行回滚（rollback）
* 示例
银行转账
## 一致性（consistency）
* 定义
从一种一致状态转换为另一种一致状态。开始和结束之后保证数据库的完整性约束没有破坏。
* 示例
库存管理系统中，不能为负数。前后一致
## 隔离性
* 定义
并发任务重同时对一个事物进行读写，一个事务不能影响其他事务的执行。
* 示例
一个存款，一个取款，两者独立互不影响
## 持久性
* 定义
事务一旦提交，数据存储是永久性的，即使遭遇故障也不能丢失数据。
* 示例
一个用户订单完成，事务提交，突然断电，服务重启后订单支付记录依然存在。
## 事务隔离级别及相关问题
常见的事务隔离级别有四种，从低到高分别是：读未提交、读已提交、可重复读和串行化
### 脏读
* 定义
一个事务读取了另一个事务未提交的数据。如果另一个事务最终回滚，那么第一个事务读取的数据就是无效的，这种数据叫做脏数据。
* 示例
事务 T1 修改了某条记录，但还未提交。此时事务 T2 读取了这条被修改的记录。随后事务 T1 回滚，那么事务 T2 读取到的数据就是脏数据。这种情况通常出现在读未提交的隔离级别下。
### 不可重复度
* 定义
在一个事务中，多次对统一数据读取缺得到了不同的结果，这是因为在事务执行过程中，另一个事务对该事务数据惊醒了修改并提交。
* 示例
事务 T1 读取了某条记录，然后事务 T2 修改了这条记录并提交。当事务 T1 再次读取这条记录时，得到的结果与第一次读取的不同。不可重复读通常出现在读已提交的隔离级别下。
### 幻读
* 定义
在一个事务内，多次执行相同的查询语句，返回的结果集不同。这是因为在事务执行过程中，另一个事务插入或删除了符合查询条件的记录。
* 示例
事务 T1 执行一个查询语句，返回了 10 条记录。然后事务 T2 插入了一条符合该查询条件的记录并提交。当事务 T1 再次执行相同的查询语句时，返回了 11 条记录，就好像出现了 “幻影” 一样。幻读通常出现在可重复读的隔离级别下。
### 各个隔离级别对应关系
|隔离级别|脏读|不可重复读|幻读|
|---|---|---|---|
|读未提交|可能出现|可能出现|可能出现|
|读已提交|不会|可能出现|可能|
|可重复读|不会|不会|可能出现|
|串行化|不会|不会|不会|